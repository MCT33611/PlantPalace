@model IEnumerable<OrderHeader>



<section class="intro a4-size ">
    <div class="bg-image h-100 a4-size">
        <div class="mask d-flex align-items-center h-100">
            <div class="">
                <div class="text-center mb-5">
                    <h3>Sales Report</h3>
                </div>
                <div class="card">
                    <form class="card-body text-center" asp-area="Admin" asp-controller="DashBoard" asp-action="SalesReport" method="post">
                        <div class="form-group m-2 w-100">
                            <select id="filter" name="filter" class="form-control">
                                <option value="all">All</option>
                                <option value="today">Today</option>
                                <option value="month">Month</option>
                                <option value="year">Year</option>
                            </select>
                        </div>
                        <button type="submit" class="btn btn-primary m-2 w-100">
                            <i class="bi bi-arrow-down-circle-fill"></i>
                            Download Sales Report
                        </button>
                    </form>

                </div>
                <div class="row justify-content-start">
                    @{
                        var minOrderDate = Model.Min(o => o.OrderDate);
                        var maxOrderDate = Model.Max(o => o.OrderDate);

                        var orderedOrders = Model.OrderByDescending(o => o.OrderDate).ToList();
                    }

                    <div class="card-header-pills text-start text-small opacity-75 mb-2">
                        <p>@minOrderDate.ToShortDateString() to @maxOrderDate.ToShortDateString() </p>
                    </div>
                    <div class="col-12">
                        <div class="card bg-dark shadow-2-strong">

                            <div class="card-body">
                                <table class="table table-dark table-borderless mb-0">
                                    <thead>
                                        <tr>
                                            <th scope="col">CUSTOMER</th>
                                            <th scope="col">CONTACT</th>

                                            <th scope="col">DATE</th>
                                            <th>Address</th>
                                            <th scope="col">TOTAL</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        @foreach (var order in orderedOrders)
                                        {
                                            <tr>
                                                <th scope="row">@order.ApplicationUser.Name</th>
                                                <th>@order.ApplicationUser.Email</th>
                                                <td>@order.OrderDate</td>
                                                <td>@order.State<br>,@order.City<br>,@order.StreetAddress<br>,@order.PostalCode</td>
                                                <td>@order.OrderTotal</td>
                                            </tr>
                                        }


                                    </tbody>
                                    <tfoot>
                                        <tr>
                                            <th>Total:</th>
                                            <td>@Model.Sum(o => o.OrderTotal)</td>
                                        </tr>
                                    </tfoot>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>